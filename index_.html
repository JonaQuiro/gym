<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rutina</title>

  <link rel="manifest" href="manifest.json">

  <link rel="stylesheet" href="css/style.css">
</head>
<body>

<!-- SELECCIÃ“N DE RUTINA -->
<div id="pantallaSeleccion" class="pantalla-seleccion">
  <h2>Â¿QuÃ© rutina vas a hacer?</h2>

  <button onclick="cargarRutina('casa')">ğŸ  Rutina en casa</button>
  <button onclick="cargarRutina('gym')">ğŸ‹ï¸ Rutina GYM</button>
</div>

<!-- APP -->
<div id="app" class="oculto">

<header>
  <h1 id="titulo">Rutina</h1>

  <div class="controls">
    <select id="selectorDia"></select>
    <button id="resetDia">ğŸ”„</button>
    <button onclick="exportarDatos()">â¬‡</button>

    <label class="import-btn">
      â¬†
      <input type="file" hidden onchange="importarDatos(this.files[0])">
    </label>
  </div>
</header>

<main id="rutina"></main>

</div>

<!-- MODAL -->
<div id="modalNota" class="modal oculto">
  <div class="modal-content">
    <h3 id="modalTitulo"></h3>

    <label>Peso (kg)
      <input type="number" id="notaPeso">
    </label>

    <label>Notas
      <textarea id="notaTexto"></textarea>
    </label>

    <div class="modal-buttons">
      <button id="guardarNota">Guardar</button>
      <button id="cancelarNota">Cancelar</button>
    </div>
  </div>
</div>

<script src="js/app.js"></script>

<script>
let rutinaScript = null;

function cargarRutina(tipo) {
  // limpiar rutinas previas
  delete window.RUTINAS;

  if (rutinaScript) rutinaScript.remove();

  rutinaScript = document.createElement('script');
  rutinaScript.src = tipo === 'casa'
    ? 'js/rutinacasa.js'
    : 'js/rutinagym.js';

  rutinaScript.onload = () => {
    document.getElementById('pantallaSeleccion').classList.add('oculto');
    document.getElementById('app').classList.remove('oculto');
    iniciarApp();
  };

  document.body.appendChild(rutinaScript);
}
</script>

<!-- âš ï¸ Service Worker desactivado para file:// -->
<!--
<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('sw.js');
}
</script>
-->

</body>
</html>
